(window["webpackJsonpcibertec-react"]=window["webpackJsonpcibertec-react"]||[]).push([[0],{17:function(e,t,n){e.exports=n(29)},22:function(e,t,n){},24:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(12),u=n.n(c),o=(n(22),n(4)),s=n.n(o),i=n(9),l=n(8),f=(n(24),r.a.createContext({isAuthenticated:function(){var e=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),saveToken:function(){var e=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),signOut:function(){}})),m=n(16),p=n(15),v=function(){var e=r.a.useState(),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState(),u=Object(l.a)(c,2),o=u[0],s=u[1],i=r.a.useState([]),f=Object(l.a)(i,2),v=f[0],d=f[1],b=r.a.useState(),h=Object(l.a)(b,2),w=h[0],j=h[1];r.a.useEffect(function(){var e=Object(m.a)(v);w&&(e.push(w),d(e))},[w]),r.a.useEffect(function(){var e=(new p.a).withUrl("http://192.168.14.10/CibertecCore/chathub").build();e.on("mensajeRecibido",function(e,t){console.log("Nuevo mensaje:",e),console.log("Usuario:",t),console.log(v),j({name:t,mensaje:e})}),e.on("nuevaConexion",function(){console.log("Nuevo usuario conectado")}),e.start().catch(function(e){return console.error(e)}),a(e);var t=prompt("Ingrese un nombre de usuario");s(t)},[]);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Mensajes"),r.a.createElement("ul",{id:"lista-mensajes"},v.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("b",null,e.name),":",e.mensaje)}))),r.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault();var t=Object(l.a)(e.target.elements,1)[0];console.log("mensaje a enviar",t.value),n&&n.send("enviarMensaje",t.value,o).then(function(){return t.value=""})}},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Mensaje"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Ingrese un Mensaje",name:"supplierId",required:!0}))),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary"},"Enviar"))))},d=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=(t[0],t[1]),a=r.a.useContext(f),c=function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.isAuthenticated();case 2:t=e.sent,console.log(t),n(t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.useEffect(function(){c()},[]),r.a.createElement(v,null)};u.a.render(r.a.createElement(function(e){var t=function(){var e=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.localStorage.getItem("__token_key")){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.setItem("__token_key",t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(f.Provider,{value:{isAuthenticated:t,saveToken:n,signOut:function(){window.localStorage.removeItem("__token_key")}}},e.children)},null,r.a.createElement(d,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.b8f54b61.chunk.js.map